{"version":3,"sources":["webpack://wordpress_starter_kit/./assets/js/modules/popin.js"],"names":["Popin","btn_open","params","popin","document","getElementById","getAttribute","box","querySelector","btn_close","items","querySelectorAll","lastItem","length","firstItem","isShifted","isLastItem","isFirstItem","clicktouch","documentElement","clickOut","e","contains","target","close","keyup","key","focus","ontab","activeElement","keydown","open","classList","add","setAttribute","addEventListener","window","onopen","stopImmediatePropagation","remove","removeEventListener","onclose","once"],"mappings":"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","file":"./js/chunks/a097e85bb3faea9e84cb.js","sourcesContent":["/* eslint-disable */\n\nfunction Popin(btn_open, params = {}) {\n    const popin = document.getElementById(btn_open.getAttribute('aria-controls'));\n    const box = popin.querySelector('.box');\n    const btn_close = popin.querySelector('.btn-close');\n    const items = popin.querySelectorAll('button,a,input');\n    const lastItem = items[items.length - 1]\n    const firstItem = items[0]\n    let isShifted = false;\n    let isLastItem = false;\n    let isFirstItem = false;\n\n    const clicktouch = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\n    const clickOut = (e) => {\n        if (!box.contains(e.target) && !btn_open.contains(e.target)) close();\n    };\n\n    const keyup = (e) => {\n        e.key === 'Escape' && close();\n        if (e.key === 'Shift') {\n            isShifted = false;\n        }\n        if (isLastItem) {\n            firstItem.focus();\n            isLastItem = false;\n        }\n        if (isFirstItem) {\n            lastItem.focus();\n            isFirstItem = false;\n        }\n    };\n\n    const ontab = () => {\n        if (document.activeElement === lastItem && !isShifted) {\n            isLastItem = true;\n        }\n        if (document.activeElement === firstItem && isShifted) {\n            isFirstItem = true;\n        }\n    }\n\n    const keydown = (e) => {\n        if (e.key === 'Shift') {\n            isShifted = true;\n        }\n        e.key === 'Tab' && ontab();\n    };\n\n    const open = () => {\n        popin.classList.add('open');\n        popin.setAttribute('aria-hidden', false);\n        btn_open.setAttribute('aria-expanded', true);\n        document.addEventListener('keydown', keydown, false);\n        document.addEventListener('keyup', keyup, false);\n        window.addEventListener(clicktouch, clickOut);\n        if (typeof params.onopen === 'function') params.onopen();\n        firstItem.focus();\n    };\n\n    const close = () => {\n        popin.classList.add('close');\n        box.addEventListener('animationend', (e) => e.stopImmediatePropagation());\n        popin.addEventListener('animationend', () => {\n            popin.classList.remove('close');\n            popin.classList.remove('open');\n            popin.setAttribute('aria-hidden', true);\n            btn_open.setAttribute('aria-expanded', false);\n            document.removeEventListener('keydown', keydown);\n            document.removeEventListener('keyup', keyup);\n            window.removeEventListener(clicktouch, clickOut);\n            if (typeof params.onclose === 'function') params.onclose();\n            btn_open.focus();\n        }, {once:true});\n    };\n\n    btn_open.addEventListener('click', open);\n    btn_close.addEventListener('click', close);\n}\n\nexport default Popin;"],"sourceRoot":""}